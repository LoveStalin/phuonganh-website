<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Ch√∫c m·ª´ng sinh nh·∫≠t Ph∆∞∆°ng Anh</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
      background-color: #fff0f5;
    }
    .container {
      display: flex;
      align-items: flex-end;
      gap: 20px;
      position: relative;
      flex-wrap: wrap;
    }
    .letter {
      background-color: #ffffff;
      padding: 30px;
      border: 2px solid #ffaec9;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      max-width: 400px;
      font-size: 18px;
      line-height: 1.6;
      position: relative;
      z-index: 1;
    }
    img {
      max-height: 400px;
      border-radius: 10px;
      display: block;
    }
    .heart {
      position: absolute;
      font-size: 24px;
      animation: float 3s infinite ease-in-out;
    }
    .heart:nth-child(1) { top: -10px; left: -20px; animation-delay: 0s; }
    .heart:nth-child(2) { top: 20px; right: -30px; animation-delay: 0.5s; }
    .heart:nth-child(3) { bottom: -10px; left: 10px; animation-delay: 1s; }
    .heart:nth-child(4) { bottom: -20px; right: 20px; animation-delay: 1.5s; }

    @keyframes float {
      0% { transform: translateY(0); opacity: 1; }
      50% { transform: translateY(-10px); opacity: 0.7; }
      100% { transform: translateY(0); opacity: 1; }
    }

    .music-toggle {
      margin-top: 20px;
      padding: 8px 20px;
      background-color: #ffaec9;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 16px;
    }

    .audio-section {
      text-align: center;
      margin-top: 20px;
    }

    .audio-section audio {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background-color: #ffaec9;
    }

    .audio-section p {
      font-weight: bold;
      margin-top: 8px;
    }

    /* Media query */
    @media (max-width: 768px) {
      .container {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-end;
        gap: 10px;
      }
      .letter, img { max-width: 90%; }
      img { max-height: 300px; margin-top: 0; }
      audio { width: 80px; height: 80px; border-radius: 50%; }
      p { font-size: 16px; }
    }

    /* Popup styles */
    .popup-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,192,203,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .popup-content {
      background: white;
      padding: 30px 40px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      position: relative;
    }

    .popup-content button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #ff69b4;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 16px;
    }

    .heart-floating {
      position: absolute;
      font-size: 24px;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      animation: floatHeart 3s infinite ease-in-out;
    }

    @keyframes floatHeart {
      0% { transform: translateX(-50%) translateY(0); opacity: 1; }
      50% { transform: translateX(-50%) translateY(-15px); opacity: 0.7; }
      100% { transform: translateX(-50%) translateY(0); opacity: 1; }
    }

    .fade-out { animation: fadeOut 0.6s forwards; }
    .fade-in { animation: fadeIn 0.6s forwards; }

    @keyframes fadeOut {
      0% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(0.95); }
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: scale(1.05); }
      100% { opacity: 1; transform: scale(1); }
    }
    .top-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: flex-start;
  gap: 30px;
  margin-bottom: 30px;
}

.photo-box {
  position: relative;
  text-align: center;
}

.pa-image {
  height: 430px;
  border-radius: 16px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.greeting-text {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 18px;
  color: #ff66a3;
  font-weight: bold;
}
  .popup-hidden {
    display: none;
  }
  #heart-photo-popup {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 99999;
  }
  .popup-box {
    background: white;
    padding: 20px;
    border-radius: 16px;
    text-align: center;
    position: relative;
    max-width: 90%;
    box-shadow: 0 0 12px rgba(0,0,0,0.3);
  }
  .close-btn {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 20px;
    color: #e75480;
    cursor: pointer;
  }
/* Responsive tr√™n ƒëi·ªán tho·∫°i */
@media (max-width: 768px) {
  .top-container {
    flex-direction: column;
    align-items: center;
  }

  .pa-image {
    height: auto;
    width: 80vw;
  }

  .greeting-text {
    top: -20px;
    font-size: 16px;
  }
}
   </style>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LGJH4TYT65"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LGJH4TYT65');
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P579482N');</script>
<!-- End Google Tag Manager -->
</head>
<body>
  <!-- Icon quy·ªÉn s√°ch ·ªü g√≥c tr√™n b√™n ph·∫£i -->
<div id="top-right-tools">
  <div id="plan-icon" onclick="togglePlan()" title="K·∫ø ho·∫°ch thay ƒë·ªïi b·∫£n th√¢n üìñ">
    üìñ
  </div>
  <div id="day-counter" class="love-counter-text">ƒêang t√≠nh ng√†y...</div>
</div>
<!-- Popup k·∫ø ho·∫°ch -->
<div id="plan-popup" class="popup-plan">
  <h3>K·∫ø ho·∫°ch thay ƒë·ªïi b·∫£n th√¢n v√¨ Ph∆∞∆°ng Anh üíï</h3>
  <ul>
    <li><span class="dot yellow"></span> Gi·∫£m c√¢n c·∫•p t·ªëc ‚Äì <b>ƒêang trong qu√° tr√¨nh</b></li>
    <li><span class="dot yellow"></span> N√¢ng cao h·ªçc th·ª©c ‚Äì <b>ƒêang trong qu√° tr√¨nh</b></li>
    <li><span class="dot yellow"></span> Th·ªÉ thao ho√° b·∫£n th√¢n ‚Äì <b>ƒêang trong qu√° tr√¨nh</b></li>
    <li><span class="dot white"></span> Thay ƒë·ªïi t√≠nh c√°ch ‚Äì <b>ƒêang ch·ªù</b></li>
    <li class="heart-photo-trigger" onclick="toggleHeartPhoto()">üíù</li>
  </ul>
</div>
<!-- üíò KH√ìA B·∫¢O M·∫¨T CHO PH∆Ø∆†NG ANH üíò -->
<div id="lock-screen" style="position:fixed; top:0; left:0; width:100%; height:100vh; background:#fff0f5; z-index:99999; display:flex; flex-direction:column; justify-content:center; align-items:center;">
  <h2 style="color:#d6336c;">üîí Web d√†nh ri√™ng cho ng∆∞·ªùi ƒë·∫∑c bi·ªát</h2>
  <p>H·ªç v√† T√™n ƒë·∫ßy ƒë·ªß c·ªßa c·∫≠u l√† g√¨? (V√≠ d·ª•: Nguy·ªÖn Xu√¢n Th√†nh)</p>
  <input id="nameInput" type="text" placeholder="Nh·∫≠p t√™n ƒë·∫ßy ƒë·ªß..." style="padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-top:10px; width: 80%; max-width: 300px;">
  <button onclick="unlockWebsite()" style="margin-top:15px; padding:10px 20px; background:#ff69b4; color:white; border:none; border-radius:8px; cursor:pointer;">M·ªü kho√°</button>
</div>
<div class="container">
  <div class="heart">‚ù§Ô∏è</div>
  <div class="heart">üíï</div>
  <div class="heart">üíñ</div>
  <div class="heart">üíò</div>

  
<!-- L·ªùi m·ªùi ƒë·∫∑c bi·ªát -->
<div id="special-invite" onclick="showInvitePopup()" style="cursor: pointer; text-align: center; margin-top: 30px;">
  <div style="font-size: 50px;">üéüÔ∏è</div>
  <div style="font-size: 20px; color: #e75480; font-weight: bold;">L·ªùi m·ªùi ƒë·∫∑c bi·ªát!</div>
</div>

<!-- Popup -->
<div id="invite-popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9999; justify-content:center; align-items:center;">
  <div style="background:#fff0f5; padding:30px; border-radius:20px; max-width:90%; width:400px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.2);">
    <h2 style="color:#d6336c;">üé¨ L·ªùi m·ªùi ƒê·∫∑c Bi·ªát!</h2>
    <p style="margin-top: 10px; font-size: 16px;">
      Ph∆∞∆°ng Anh √†!<br>T·ªõ mu·ªën m·ªùi c·∫≠u ƒëi xem phim v·ªõi t·ªõ...<br><br>
      B·ªô phim v√† th·ªùi gian xem phim(sau ng√†y 09/07) th√¨ s·∫Ω ph·ª• thu·ªôc v√†o s·ª± l·ª±a ch·ªçn c·ªßa c·∫≠u nha~~~<br>
      C√≤n t·ªõ th√¨ s·∫Ω lo chuy·ªán ti·ªÅn nong,v√© xem phim,c√°c kho·∫£n ti·ªÅn ph·ª•,...(Bao g·ªìm c·∫£ vi·ªác chi·ªÅu chu·ªông c·∫≠u hhhhh) <br><br>
      N·∫øu c·∫≠u ƒë·ªìng √Ω, h√£y g·ª≠i l·ªùi nh·∫Øn nh·ªß ·ªü website n√†y nha!<br>
      N·∫øu c·∫≠u t·ª´ ch·ªëi, c·∫≠u c√≥ th·ªÉ g·ª≠i l·ªùi l√™n website n√†y, ho·∫∑c kh√¥ng g·ª≠i n·∫øu c·∫≠u ng·∫°i.<br><br>
      <strong>09/07</strong> t·ªõ s·∫Ω l√™n web ki·ªÉm tra ƒë·ªÉ xem c√¢u tr·∫£ l·ªùi c·ªßa c·∫≠u ·∫°!<br>
      C·∫£m ∆°n c·∫≠u r·∫•t nhi·ªÅu!
    </p>
    <button onclick="closeInvitePopup()" style="margin-top:20px; padding:10px 20px; background:#ff69b4; color:white; border:none; border-radius:8px; cursor:pointer;">OK ü•∫</button>
  </div>
</div>
<div class="top-container">
  <div class="photo-box">
    <div id="greeting-message" class="greeting-text"></div>
    <img src="phuonganhdangyeu.png" alt="Ph∆∞∆°ng Anh" class="pa-image">
  </div>

  <div class="letter">
    <h2>G·ª≠i Ph∆∞∆°ng Anh</h2>
    <p>
      C√≥ m·ªôt ng∆∞·ªùi lu√¥n ·ªü trong tim t·ªõ.
      C·∫≠u l√† Ph∆∞∆°ng Anh ‚Äì ng∆∞·ªùi ƒë√£ khi·∫øn t·ªõ tr∆∞·ªüng th√†nh h∆°n t·ª´ng ng√†y.
      D√π t∆∞∆°ng lai c√≥ ra sao, t·ªõ v·∫´n lu√¥n bi·∫øt ∆°n v√¨ t·∫•t c·∫£.
      V√¨ c·∫≠u m√† t·ªõ ƒë√£ h·ªçc ƒë∆∞·ª£c r·∫•t nhi·ªÅu ƒëi·ªÅu.
      Ph∆∞∆°ng Anh √†! T·ªõ th∆∞∆°ng c·∫≠u r·∫•t nhi·ªÅu!
      D√π sao th√¨, ch√∫c c·∫≠u m·ªôt ng√†y sinh nh·∫≠t ƒë√°ng nh·ªõ nh√©!
      T·ªõ ch√∫c c·∫≠u lu√¥n h·ªçc gi·ªèi v√† th√†nh c√¥ng trong t∆∞∆°ng lai.
      Xu√¢n Th√†nh t·ªõ ƒë√¢y s·∫Ω lu√¥n y√™u th∆∞∆°ng v√† b·∫£o v·ªá c·∫≠u.
      V√¨ c·∫≠u - t·ªõ nguy·ªán l√†m t·∫•t c·∫£.üíïüíïüíï(‚ùÅ¬¥‚ó°`‚ùÅ)
    </p>
  </div>
<button class="music-toggle" onclick="toggleMusic()">üîä B·∫≠t nh·∫°c</button>

<audio id="bg-music" autoplay loop>
  <source src="audio/Doubt.mp3" type="audio/mp3">
</audio>

<!-- Popup trang 1 -->
<div id="popup" class="popup-overlay">
  <div class="popup-content" id="popup-page-1">
    <h2>üéâ Ch√†o M·ª´ng Ph∆∞∆°ng Anh üéâ</h2>
    <p>Xu√¢n Th√†nh ƒë√¢y!<br>Ch√∫c c·∫≠u c√≥ ng√†y sinh nh·∫≠t th·∫≠t h·∫°nh ph√∫c v√† ƒë√°ng nh·ªõ nha üíñ<br>
      T·ªõ ƒë√£ d√†nh c·∫£ ng√†y l·∫´n ƒë√™m ch·ªâ ƒë·ªÉ l√†m trang web nh·ªè n√†y cho c·∫≠u ƒë√≥ nha hihi<br>
      Kh√¥ng ph·∫£i v√¨ t·ªõ r·∫£nh ƒë√¢u, m√† l√† v√¨‚Ä¶<br>
      T·ªõ mu·ªën l√†m ra m·ªôt th·ª© g√¨ ƒë√≥ ch·ªâ d√†nh ri√™ng cho Ph∆∞∆°ng Anh th√¥i (ÔΩ°‚ô•‚Äø‚ô•ÔΩ°)<br>
      V√† t·ªõ c≈©ng mong c·∫≠u hi·ªÉu r·∫±ng...<br>
      T·ªõ y√™u th∆∞∆°ng c·∫≠u ƒë·∫øn nh∆∞·ªùng n√†o,c≈©ng nh∆∞ chuy·ªán...Ph∆∞∆°ng Anh ƒë·∫∑c bi·ªát nh∆∞ th·∫ø n√†oüíïüíï<br>
      P/S:L√¢u l√¢u t·ªõ hay ƒë·ªÉ ghi ch√∫ ·ªü tr√™n messenger ch·ªâ m√¨nh c·∫≠u xem ƒë∆∞·ª£c,t·ªõ kh√¥ng bi·∫øt c·∫≠u c√≥ ƒë·ªÉ √Ω ch√∫ng kh√¥ng...<br>
    </p>
    <button onclick="showNextPopupPage()">Ti·∫øp ‚û§</button>
    <div class="heart-floating">‚ù§Ô∏è</div>
  </div>
</div>

<!-- Popup trang 2 -->
<div id="popup2" class="popup-overlay">
  <div class="popup-content fade-in">
    <h3>Trang Web n√†y ch·ªâ d√†nh ri√™ng cho c·∫≠u th√¥ii üíù</h3>
    <p>
      Trang Web n√†y bao g·ªìm l·ªùi m√† t·ªõ mu·ªën n√≥i v·ªõi c·∫≠u,<br>
      c√≥ nh·∫°c Doubt (t·ªõ kh√¥ng bi·∫øt n√™n d√πng nh·∫°c n√†o üòÅ)<br>
      v√† m·ªôt ƒëo·∫°n ghi √¢m 3p c·ªßa t·ªõ d√†nh cho c·∫≠u.<br>
      T·ªõ ch·ªâ c√≥ th·ªÉ l√†m ƒë∆∞·ª£c nh∆∞ th·∫ø n√†y trong m·∫•y ng√†y qua thui, c·∫≠u th√¥ng c·∫£m nha üò≠üôè
    </p>
    <button onclick="acceptLove()">Ogeeee ü•∫</button>
    <button onclick="declineLove()">Kh√¥ng üòè</button>
    <div class="heart-floating">üíñ</div>
  </div>
</div>

<!-- C·∫£m ∆°n -->
<div id="thankyou" class="popup-overlay">
  <div class="popup-content fade-in">
    <h2>T·ªõ c·∫£m ∆°n c·∫≠u nhi·ªÅu nh√≥oo ü•∞</h2>
    <div class="heart-floating">üíò</div>
  </div>
</div>

<!-- Xin l·ªói -->
<div id="sorry" class="popup-overlay">
  <div class="popup-content fade-in">
    <h2>Cho t·ªõ xin l·ªói c·∫≠u nhi·ªÅu ·∫° üòî</h2>
    <div class="heart-floating">üíî</div>
  </div>
</div>
<!-- üëá Th√™m ƒëo·∫°n n√†y v√†o cu·ªëi <body>, tr∆∞·ªõc </body> -->
<script>
// M∆∞a tim
const numHearts = 50;
for (let i = 0; i < numHearts; i++) {
  const heart = document.createElement("div");
  heart.className = "rain-heart";
  heart.innerText = "üíñ";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.animationDuration = 2 + Math.random() * 3 + "s";
  heart.style.fontSize = 12 + Math.random() * 24 + "px";
  heart.style.top = Math.random() * -100 + "px";
  document.body.appendChild(heart);
}

// G√µ t·ª´ng ch·ªØ
const letter = document.querySelector(".letter p");
const fullText = letter.innerHTML;
letter.innerHTML = ""; // X√≥a ƒë·ªÉ b·∫Øt ƒë·∫ßu g√µ
let i = 0;
function typeLetter() {
  if (i < fullText.length) {
    letter.innerHTML += fullText.charAt(i);
    i++;
    setTimeout(typeLetter, 40); // t·ªëc ƒë·ªô g√µ (ms)
  }
}
window.addEventListener("load", typeLetter);
</script>

<style>
  #plan-icon {
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 30px;
  cursor: pointer;
  z-index: 10000;
}

.popup-plan {
  display: none;
  position: fixed;
  top: 70px;
  right: 20px;
  background: #fff0f5;
  border: 2px solid #ffaec9;
  padding: 20px;
  border-radius: 15px;
  z-index: 9999;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  max-width: 300px;
}

.popup-plan ul {
  padding: 0;
  list-style: none;
  margin: 0;
}

.popup-plan li {
  margin-bottom: 10px;
  font-size: 16px;
}

.dot {
  display: inline-block;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  margin-right: 8px;
}

.dot.yellow { background: gold; }
.dot.white { background: white; border: 1px solid #aaa; }
.popup-hidden {
  display: none;
}

#heart-photo-popup {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.6);
  display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
  justify-content: center;
  align-items: center;
  z-index: 10000;
}

.popup-box {
  background: white;
  padding: 20px;
  border-radius: 20px;
  text-align: center;
  max-width: 90%;
  max-height: 90%;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 0 15px rgba(0,0,0,0.4);
}

.popup-box img {
  max-width: 100%;
  border-radius: 10px;
}

.close-btn {
  position: absolute;
  top: 10px; right: 15px;
  font-size: 24px;
  cursor: pointer;
  color: #ff69b4;
  font-weight: bold;
  z-index: 10001;
}

.heart-photo-trigger {
  cursor: pointer;
  font-size: 20px;
  text-align: center;
  transition: transform 0.3s ease;
}
.heart-photo-trigger:hover {
  transform: scale(1.2);
}
/* üíñ CSS cho m∆∞a tim */
.rain-heart {
  position: fixed;
  top: 0;
  z-index: 0;
  animation-name: dropHeart;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

@keyframes dropHeart {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh);
    opacity: 0;
  }
}
#top-right-tools {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  z-index: 10000;
}

#plan-icon {
  font-size: 30px;
  cursor: pointer;
}

.love-counter-text {
  background-color: #ffe4ec;
  color: #d63384;
  font-weight: bold;
  padding: 6px 12px;
  border-radius: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  font-size: 14px;
}
</style>
<script>
  const bgMusic = document.getElementById("bg-music");
  const toggleBtn = document.querySelector(".music-toggle");

  function toggleMusic() {
    if (bgMusic.paused) {
      bgMusic.play();
      toggleBtn.innerText = "üîà T·∫Øt nh·∫°c";
    } else {
      bgMusic.pause();
      toggleBtn.innerText = "üîä B·∫≠t nh·∫°c";
    }
  }
  // ƒê√°nh th·ª©c server tr∆∞·ªõc ƒë·ªÉ tr√°nh delay g·ª≠i comment
fetch("https://comment-cho-pa.onrender.com/comments")
  .then(() => console.log("Server s·∫µn s√†ng"))
  .catch(() => console.log("ƒêang ƒë√°nh th·ª©c server..."));
 window.onload = function () {
  // Hi·ªán popup ƒë·∫ßu
  document.getElementById("popup").style.display = "flex";

  // G·ªçi render comment
  renderComments();

  // Cu·ªôn ƒë·∫øn khung comment
  window.scrollTo({ top: document.getElementById("comment-list").offsetTop, behavior: "smooth" });

  // Hi·ªán l·ªùi ch√†o theo gi·ªù
  showGreeting();
};
  function showNextPopupPage() {
    const popup1 = document.getElementById("popup");
    popup1.classList.add("fade-out");
    setTimeout(() => {
      popup1.style.display = "none";
      document.getElementById("popup2").style.display = "flex";
    }, 600);
  }

  function acceptLove() {
    document.getElementById("popup2").style.display = "none";
    const thank = document.getElementById("thankyou");
    thank.style.display = "flex";
    setTimeout(() => { thank.style.display = "none"; }, 3000);
  }

  function declineLove() {
    document.getElementById("popup2").style.display = "none";
    document.getElementById("sorry").style.display = "flex";
  }
 

function closePopup() {
  document.getElementById("popup").style.display = "none";
  document.getElementById("popup2").style.display = "flex"; // m·ªü trang ti·∫øp
}

function acceptLove() {
  document.getElementById("popup2").style.display = "none";
  document.getElementById("thankyou").style.display = "flex";

  // T·ª± ƒë·ªông t·∫Øt sau 2 gi√¢y
  setTimeout(() => {
    document.getElementById("thankyou").style.display = "none";
  }, 2000);
}

function declineLove() {
  document.getElementById("popup2").style.display = "none";
  const sorry = document.getElementById("sorry");
  sorry.style.display = "flex";

  // T·ª± ƒë·ªông t·∫Øt sau 2 gi√¢y
  setTimeout(() => {
    sorry.style.display = "none";
  }, 2000);
}
function postComment() {
  const name = document.getElementById("comment-name").value.trim() || "·∫®n danh";
  const message = document.getElementById("comment-message").value.trim();

  if (!message) {
    alert("B·∫°n ch∆∞a nh·∫≠p l·ªùi nh·∫Øn!");
    return;
  }

  fetch("https://comment-cho-pa.onrender.com/comments", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ name, message })
  })
    .then(response => {
      if (!response.ok) throw new Error("G·ª≠i th·∫•t b·∫°i");
      return response.json();
    })
    .then(() => {
      document.getElementById("comment-name").value = "";
      document.getElementById("comment-message").value = "";
      renderComments();
    })
    .catch(error => {
      alert("L·ªói khi g·ª≠i l·ªùi nh·∫Øn üò≠: " + error.message);
    });
}

function renderComments() {
  const list = document.getElementById("comment-list");
  list.innerHTML = "<p>ƒêang t·∫£i l·ªùi nh·∫Øn...</p>";

  fetch("https://comment-cho-pa.onrender.com/comments")
    .then(res => res.json())
    .then(comments => {
      list.innerHTML = "";
      comments.forEach((comment, index) => {
        const commentBox = document.createElement("div");
        commentBox.style.background = "#fff0f5";
        commentBox.style.border = "1px solid #ffaec9";
        commentBox.style.padding = "15px";
        commentBox.style.marginBottom = "10px";
        commentBox.style.borderRadius = "12px";
        commentBox.style.boxShadow = "0 2px 5px rgba(0,0,0,0.1)";

        // Hi·ªán replies (n·∫øu c√≥)
        let repliesHTML = "";
        if (comment.replies && comment.replies.length > 0) {
          repliesHTML = `<div style="margin-top:10px; padding-left:20px;">`;
          comment.replies.forEach(reply => {
            repliesHTML += `
              <div style="margin-bottom:5px;">
                <strong style="color:#e75480;">‚Ü≥ ${reply.name}</strong>: ${reply.message}
              </div>`;
          });
          repliesHTML += `</div>`;
        }

        // HTML hi·ªÉn th·ªã comment + form tr·∫£ l·ªùi
        commentBox.innerHTML = `
          <div style="color: #e75480; font-weight: bold;">${comment.name}</div>
          <div style="margin-top: 5px;">${comment.message}</div>
          ${repliesHTML}
          <button onclick="showReplyBox(${index})" style="margin-top:10px;">üí¨ Tr·∫£ l·ªùi</button>
          <div id="reply-box-${index}" style="display:none; margin-top:10px;">
            <input type="text" id="reply-name-${index}" placeholder="T√™n b·∫°n (n·∫øu mu·ªën)" />
            <input type="text" id="reply-message-${index}" placeholder="Nh·∫≠p l·ªùi ph·∫£n h·ªìi" />
            <button onclick="sendReply(${index})">G·ª≠i</button>
          </div>
        `;
        list.appendChild(commentBox);
      });
    })
    .catch(err => {
      list.innerHTML = "<p>Kh√¥ng th·ªÉ t·∫£i l·ªùi nh·∫Øn üò¢</p>";
      console.error(err);
    });
}
function showReplyBox(index) {
  const box = document.getElementById(`reply-box-${index}`);
  if (box.style.display === "none") {
    box.style.display = "block";
  } else {
    box.style.display = "none";
  }
}
function sendReply(index) {
  const name = document.getElementById(`reply-name-${index}`).value.trim() || "·∫®n danh";
  const message = document.getElementById(`reply-message-${index}`).value.trim();

  if (!message) {
    alert("B·∫°n ch∆∞a nh·∫≠p l·ªùi ph·∫£n h·ªìi!");
    return;
  }

  fetch(`https://comment-cho-pa.onrender.com/comments/${index}/reply`, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ name, message })
  })
    .then(res => {
      if (!res.ok) throw new Error("Kh√¥ng g·ª≠i ƒë∆∞·ª£c ph·∫£n h·ªìi");
      return res.json();
    })
    .then(() => {
      // Clear input + ·∫©n form
      document.getElementById(`reply-name-${index}`).value = "";
      document.getElementById(`reply-message-${index}`).value = "";
      showReplyBox(index); // ·∫©n l·∫°i
      renderComments(); // load l·∫°i comment ƒë·ªÉ hi·ªán ph·∫£n h·ªìi
    })
    .catch(err => {
      alert("G·ª≠i ph·∫£n h·ªìi th·∫•t b·∫°i üò≠: " + err.message);
    });
}
  document.getElementById("popup").style.display = "flex";

const formattedMessage = comment.message.replace(/\n/g, "<br>");
commentBox.innerHTML = `<strong>${comment.name}</strong><br>${formattedMessage}`;
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P579482N"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
 <!-- Comment section -->
<div id="comment-section" style="margin-top: 50px; width: 100%; max-width: 600px; text-align: center;">
  <h3>üí¨ Vi·∫øt l·ªùi nh·∫Øn m√† Ph∆∞∆°ng Anh g·ª≠i t·ªõi Xu√¢n Th√†nh üí¨</h3>
  <input type="text" id="comment-name" placeholder="T√™n b·∫°n (ho·∫∑c ƒë·ªÉ tr·ªëng n·∫øu ·∫©n danh)"
         style="padding: 10px; width: 80%; margin-bottom: 10px; border-radius: 10px; border: 1px solid #ffaec9;"><br>
  <textarea id="comment-message" rows="4" placeholder="Vi·∫øt l·ªùi nh·∫Øn t·∫°i ƒë√¢y...(Khi ·∫•n g·ª≠i,ch·ªù m·ªôt l√∫c nha...ch·ªù t·∫ßm 20s g√¨ ƒë√≥ th√¨ nh·∫•n l·∫ßn 2.M√°y t·ªõ c·ªï qu√° n√™n server y·∫øu l·∫Øm huhu)"
            style="padding: 10px; width: 80%; border-radius: 10px; border: 1px solid #ffaec9;"></textarea><br>
  <button onclick="postComment()" 
          style="margin-top: 10px; padding: 10px 20px; background-color: #ff69b4; color: white; border: none; border-radius: 20px; cursor: pointer;">
    G·ª≠i üíå
  </button>

  <div id="comment-list" style="margin-top: 30px; text-align: left;"></div>
</div>
<!-- üéß G√≥c ph·∫£i d∆∞·ªõi: 3 audio m·ªü r·ªông -->
<div style="position: fixed; bottom: 20px; right: 20px; background: #fff0f5; padding: 15px; border-radius: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 10000; width: 360px;">
  <h4 style="color: #d63384; margin: 0 0 10px;">üéß T√¢m s·ª± c·ªßa t·ªõ n√®:</h4>

  <div style="margin-bottom: 15px;">
    <p style="margin: 5px 0; font-size: 15px;"><strong>Audio 1</strong></p>
    <audio controls style="width: 100%; height: 35px;">
      <source src="audio/ghiamdanhchoPa.mp3" type="audio/mp3">
    </audio>
  </div>

  <div style="margin-bottom: 15px;">
    <p style="margin: 5px 0; font-size: 15px;"><strong>Audio 2</strong></p>
    <audio controls style="width: 100%; height: 35px;">
      <source src="audio/ghiam2danhchoPa.mp3" type="audio/mp3">
    </audio>
  </div>

  <div>
    <p style="margin: 5px 0; font-size: 15px;"><strong>Audio 3</strong></p>
    <audio id="audio-3" controls style="width: 100%; height: 35px;">
      <source src="audio/ghiam3danhchoPa.mp3" type="audio/mp3">
    </audio>
  </div>
</div>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    const audio3 = document.getElementById("audio-3");
    const finalMessage = document.getElementById("final-message");

    if (audio3) {
      audio3.addEventListener("ended", function () {
        finalMessage.style.display = "block";
        finalMessage.scrollIntoView({ behavior: "smooth" });
      });
    }
  });
 // ƒê·∫øm ng√†y y√™u
const firstLoveDate = new Date("2024-06-04");
const today = new Date();
const daysPassed = Math.floor((today - firstLoveDate) / (1000 * 60 * 60 * 24));
document.getElementById("day-counter").innerText = `ƒê√£ ${daysPassed} ng√†y k·ªÉ t·ª´ l√∫c t·ªõ c√¥ng khai th√≠ch c·∫≠u... üòç`;

  function showInvitePopup() {
    document.getElementById("invite-popup").style.display = "flex";
  }

  function closeInvitePopup() {
    document.getElementById("invite-popup").style.display = "none";
  }
  function unlockWebsite() {
    const input = document.getElementById("nameInput").value.trim().toLowerCase();
    const correctName = "ƒë·ªó ph·∫°m ph∆∞∆°ng anh";

    if (input === correctName) {
      document.getElementById("lock-screen").style.display = "none";
    } else {
      alert("ƒê·ªãt m·∫π, c√∫t ngay kh·ªèi web c·ªßa tao! Web n√†y ch·ªâ d√†nh cho ng∆∞·ªùi ƒë·∫∑c bi·ªát!");
    }
  }
  function showGreeting() {
    const hour = new Date().getHours(); // L·∫•y gi·ªù hi·ªán t·∫°i (0-23)
    const messageBox = document.getElementById("greeting-message");
    let message = "";

    if (hour >= 21 || hour < 5) {
      message = "Ch√∫c Ph∆∞∆°ng Anh ng·ªß ngon v√† m∆° ƒë·∫πp nha üí§üí§üí§";
    } else if (hour >= 5 && hour < 11) {
      message = "Ch√†o bu·ªïi s√°ng, Ph∆∞∆°ng Anh ƒë√°ng y√™u ‚òÄÔ∏è.Kh√¥ng ƒë∆∞·ª£c b·ªè b·ªØa s√°ng ƒë√¢u ƒë·∫•y nha!!!";
    } else if (hour >= 11 && hour < 14) {
      message = "Ch√∫c Ph∆∞∆°ng Anh ƒÉn tr∆∞a ngon mi·ªáng,ng·ªß tr∆∞a t√Ω ƒë·ªÉ l·∫•y s·ª©c cho bu·ªïi chi·ªÅu nha!";
    } else if (hour >= 14 && hour < 17) {
      message = "Ch√∫c Ph∆∞∆°ng Anh c√≥ m·ªôt bu·ªïi chi·ªÅu zui z·∫ª nha! C√≥ g√¨ ng·∫Øm ho√†ng h√¥n cho y√™u ƒë·ªùi hehe!";
    } else if (hour >= 17 && hour < 21) {
      message = "Ch√†o bu·ªïi t·ªëi, Ph∆∞∆°ng Anh! B·ªØa t·ªëi quan tr·ªçng l·∫Øm ƒë√≥, nh·ªõ ƒÉn ƒë·∫•y nha!!!";
    }

    messageBox.innerText = message;
  }
  document.addEventListener("DOMContentLoaded", showGreeting);
  
  function togglePlan() {
  const popup = document.getElementById("plan-popup");
  popup.style.display = popup.style.display === "block" ? "none" : "block";
}
  function toggleHeartPhoto() {
  const popup = document.getElementById("heart-photo-popup");
  const isHidden = popup.style.display === "none" || popup.classList.contains("popup-hidden");

  if (isHidden) {
    popup.style.display = "flex";
    popup.classList.remove("popup-hidden");
  } else {
    popup.style.display = "none";
    popup.classList.add("popup-hidden");
  }
}
function playAudio3() {
  const audio = document.getElementById("audio3");
  audio.play();
}

</script>
<!-- Popup ·∫£nh üíù -->
<div id="heart-photo-popup" class="popup-hidden">
  <div class="popup-box">
    <span class="close-btn" onclick="toggleHeartPhoto()">‚úñ</span>
    <img src = "images/ngamnhinPhuongAnh.jpg" alt="Ng·∫Øm nh√¨n Ph∆∞∆°ng Anh t·ª´ xa" style="max-width:100%; border-radius:10px;">
    <p style="margin-top : 10px;" >üì∑ Nh·ªõ m√£i kho·∫£nh kh·∫Øc ng·ªìi nh√¨n Ph∆∞∆°ng Anh t·ª´ xa‚Ä¶</p>
  </div>
</div>
<div id="final-message" style="
  display: none;
  position: fixed;
  bottom: 100px;
  left: 135px ;
  transform: translateX(-50%) ;
  background: #ffe4ec;
  padding: 10px 20px;
  border-radius: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  color: #d63384;
  font-weight: bold;
  font-size: 14px;
  z-index: 9998;
  max-width: 250px;
">
  N·∫øu c·∫≠u ƒë√£ ƒë·ªçc t·ªõi ƒë√¢y‚Ä¶ c·∫£m ∆°n v√¨ ƒë√£ kh√¥ng b·ªè r∆°i trang web n√†y.<br>
  Tuy t·ªõ kh√¥ng d√°m t·ªè t√¨nh tr·ª±c ti·∫øp, nh∆∞ng ƒë√¢y l√† t·∫•t c·∫£ can ƒë·∫£m c·ªßa t·ªõ‚Ä¶<br>
  Ph∆∞∆°ng Anh √†,k·ªÉ c·∫£ ch√∫ng ta c√≥ kh√°c l·ªõp khi h·ªçc c·∫•p 3,t·ªõ v·∫´n s·∫Ω:<br>
  Th·∫ßm y√™u th∆∞∆°ng,tr·ªôm nh·ªõ c·∫≠u.<br>
  √Çm th·∫ßm b·∫£o v·ªá c·∫≠u.<br>
  Kh√¥ng l√†m phi·ªÅn v√† ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác h·ªçc v√† ph√°t tri·ªÉn c·ªßa c·∫≠u.<br>
  T·ªõ ƒë√£ l√†m h·∫≥n c·∫£ website n√†y r·ªìi...<br>
  T·ªõ kh√¥ng mu·ªën l√£ng ph√≠ nh·ªØng th·ª© m√† t·ªõ ƒë√£ c·ªë g·∫Øng l√†m n√™n.<br>
  V√¨ th·∫ø...Mong c·∫≠u cho ph√©p t·ªõ ƒë∆∞·ª£c theo ƒëu·ªïi c·∫≠u...
</div>
</body>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
</html>